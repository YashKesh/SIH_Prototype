{% extends 'main.html' %}
{% block content %}
{% load static %}
<style>
  .main {
    background-color: #dde3fd;
    height: 100vh;
    font-family: 'Roboto', sans-serif;
  }
  .doughnut{
    gap: 2rem;
  }
  
  .row{
    margin-left: 2%;
  }
  .card {
    margin-top: 4%;
    width: 100%;
    margin-left: 1%;
  }

  .canvas-frame {
    margin-bottom: 3%;
    
  }

  .marginleft {
    margin-left: 1.5%;
  }
  .share{
    display: flex;
  }
  .information{
    margin-top: 20%;
    font-family: 'Roboto', sans-serif;
    font-size: large;
    margin-left: 2rem;
  }
  .text-muted{
    font-weight: 400;
    font-size: large;
  }
.data{
  margin-top: 3rem;
  font-family: 'Roboto', sans-serif;
  font-weight: 400;
  
}
.card .card-title{
  font-size: large;
  width: 100%;
  color: #4B49AC;
}
.card-title{
  margin-left: 5%;
}
.security{
  margin-top: 0%;
}
.barchart{
  width: 40%;
}
.break{
  margin-top: 2%;
}
h4{
  color: #ffff;
}
.new-chart{
  width: 40%;
  height: 100%;
  margin-top: 0%;
}
</style>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>chart.js</title>
</head>

<body>
  <div class="main overflow-auto">
    <div class="row doughnut">
    <div class="grid-margin marginleft">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Ram Usage</h4>
          <div class="share">
          <canvas class="canvas-frame" id="chartId" aria-label="chart" height="200" width="200"></canvas>
          <span class="information">Ram usage <br class="break"><span class="text-muted data">{{data.ram_usage}}%</span></span>
        </div>
        </div>
      </div>
    </div>
    <div class="grid-margin marginleft">
      <div class="card">
        <div class="card-body card1">
          <h4 class="card-title">Disk Usage Information</h4>
          <div class="share">
          <canvas class="canvas-frame" id="chartId1" aria-label="chart" height="200" width="200"></canvas>
          <span class="information disk">Disk Occupied <br><span class="text-muted data">{{data.disk_info}}%</span></span>
        </div>
        </div>
      </div>
    </div>
    <div class="grid-margin marginleft">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Incidents Report</h4>
          <div class="share">
          <canvas class="canvas-frame" id="chartId2" aria-label="chart" height="200" width="200"></canvas>
          <span class="information disk">Live Incidents <br><span class="text-muted data">1</span></span>   
           <!--in the above the span the live incident count needs to be displayed for now it is static  -->
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="card security barchart">
      <div class="card-body ">
        <h4 class="card-title">Security State</h4>
        <canvas class="barchart" id="myChart" width="200" height="90"></canvas>
        <!-- This is also static for now -->
      </div>
    </div>
  </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.1.1/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="chartjs-plugin-doughnutlabel.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>

  <script>
    //new doughnut chart code trial
    //
    const barchart = document.getElementById('myChart').getContext('2d');
    const chart = new Chart(barchart, {
      type: 'bar',
      data: {
        labels: ['Antispyware', 'Antivirus', 'Auto-Update',"Firewall","Internet"],
        datasets: [{
          label: 'States',
          data: [100, 89, 75,45,95],
          backgroundColor: [
          'rgba(255, 99, 132, 0.6)', // Change the color of the first bar
          'rgba(255, 159, 64, 0.6)', // Change the color of the second bar
          'rgba(189, 254, 86, 0.6)', // Change the color of the third bar
          'rgba(234, 254, 86, 0.6)',
          'rgba(175, 200, 86, 0.6)',
          ],
        borderColor: [
          'rgb(255, 99, 132)',
          'rgb(255, 159, 64)',
          'rgb(189, 254, 86)',
          'rgba(189, 254, 86)',
          'rgba(175, 200, 86)',
        ],
        borderWidth: 1
        }],
      },
      options: {
        indexAxis: 'x', // <-- here
        responsive: true,
        plugins:{
          legend: {
            display: false // Hide the legend
          },
        },
        scales: {
          x: {
            grid: {
              display: false // Hide the x-axis grid lines
            }
          },
          
        }
      }
    });
    // This above part is the horizontal bar chart
    var chrt1 = document.getElementById("chartId").getContext("2d");
    var chartId1 = new Chart(chrt1, {
      type: 'doughnut',
      data: {
        labels: ["RAM USED", "UNUSED RAM"],
        datasets: [{
          label: "Ram Usage Graph",
          data: ["{{data.ram_usage}}", "{{data.unused_ram}}"],
          backgroundColor: ['rgba(255, 99, 133, 0.788)', 'rgba(54, 162, 235, 0.6)'],
          hoverOffset: 5
        }],
      },
      options: {
        responsive: false,
        cutout: 70,
        legend: {
          display: false // Hide the legend
        },
        plugins: {
          doughnutLabel :{
            labels : [
            {
              text : "the title",
              font :{
                size : '60'
              }
            }
            ]
          },
          legend: {
            display: false // Hide the legend
          },
        },
        
      },
    });
    

    var chrt2 = document.getElementById("chartId1").getContext("2d");
    var data = {
      labels: ["DISK USED", "EMPTY DISK"],
      datasets: [{
        label: "Disk Usage Graph",
        data: ["{{data.disk_info}}", "{{data.diskempty}}"],
        backgroundColor: ['lightblue', 'lightgreen'],
        hoverOffset: 5
      }],
    };
    
    var chartId2 = new Chart(chrt2, {
      type: 'doughnut',
      data: data,
      options: {
        responsive: false,
        cutout: 70,
        plugins: {
          legend: {
            display: false // Hide the legend
          },
        },
      },
    });
    
    var chrt3 = document.getElementById("chartId2").getContext("2d");
    var chartId2 = new Chart(chrt3, {
      type: 'doughnut',
      data: {
        labels: [ "Total Incidents","Live Incident"],
        datasets: [{
          label: "Ram Usage Graph",
          data: [5, 1],
          backgroundColor: ['yellow', 'aqua'],
          hoverOffset: 5
        }],
      },
      options: {
        responsive: false,
        cutout: 70,
        plugins:{
          legend: {
            display: false // Hide the legend
          },
        }
        
      },
    });
    
  </script>
</body>

{% endblock content %}
